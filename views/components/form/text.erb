<%# locals: (name: nil, label: nil, type: "text", value: nil, attributes: {}, extra_class: nil, button_title: nil, prefix: nil, id: name, handle_params_and_errors: true) %>
<% if handle_params_and_errors
value = typecast_body_params.str(name) || value if name
error = rodauth.field_error(name) || flash.dig("errors", name)
end %>

<div class="form-group-colored">
  <% if label %>
    <label for="<%= name %>" class="form-label-block"><%= label %></label>
  <% end %>
  <div class="input-wrapper">
    <% if prefix %>
      <div class="input-prefix"><%= prefix %></div>
    <% end %>
    <input
      id="<%= id %>"
      type="<%= type %>"
      name="<%= name %>"
      <% if value %>
      value="<%= value %>"
      <% end %>
      class="<%= prefix ? (error ? "text-field-with-prefix-error" : "text-field-with-prefix") : (error ? "text-field-error" : "text-field") %> <%= extra_class %>"
      <%== html_attrs(attributes) %>
    >
    <% if button_title %>
      <%== part("components/form/submit_button", text: button_title) %>
    <% end %>
  </div>
  <%== part("components/form/error", name:, error:) if error %>
</div>
