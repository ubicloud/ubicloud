<%
@page_title = "Create Firewall"
params = flash["old"] || request.params
%>

<%== part(
  "components/page_header",
  breadcrumbs: [
    %w[Projects /project],
    [@project_data[:name], @project_data[:path]],
    ["Firewalls", "#{@project_data[:path]}/firewall"],
    %w[Create #]
  ]
) %>

<% form(action: "#{@project_data[:path]}/firewall", method: "POST", id: "dependency-form", dependencies: "location") do |f| %>
  <% wrap_resource_form do %>
    <%== f.input(:text, key: :name, required: true, label: "Name", placeholder: "Enter name", main_wrapper_class: "sm:col-span-2", value: params["name"], error: flash.dig("errors", "name")) %>
    <%== f.input(:text, key: :description, required: true, label: "Description", placeholder: "Enter description", main_wrapper_class: "sm:col-span-2", value: params["description"], error: flash.dig("errors", "description")) %>
    <%== f.input(:radioset, key: :location, required: true, label: "Location", options: Option.locations.map { [_1.ui_name, _1.id] }, provides: "location", selected: params["location"]) %>
    <%== f.input(:select, key: :private_subnet_id, required: true, label: "Private Subnet", main_wrapper_class: "sm:col-span-2", add_blank: "Select private subnet", selected: params["private_subnet_id"], options: dataset_authorize(@project.private_subnets_dataset, "PrivateSubnet:view").map { [_1.name, {value: _1.ubid, class: "depends-location #{_1.location_id}"}] }) %>
  <% end %>
<% end %>
